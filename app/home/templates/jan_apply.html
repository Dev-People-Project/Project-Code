{% extends 'layouts/base.html' %}

{% block title %} 주최자 정보 {% endblock title %}

{% block content %}

<div class="header pb-6 d-flex align-items-center" 
     style="min-height: 500px; background-image: url(/static/assets/img/theme/profile-cover.jpg); background-size: cover; background-position: center top;">
  <!-- Mask -->
  <span class="mask bg-gradient-default opacity-8"></span>
  <!-- Header container -->
  <div class="container-fluid d-flex align-items-center">
    <div class="row">
      <div class="col-lg-7 col-md-10">
        <h1 class="display-2 text-white">안녕하세요, {{ current_user.username }}님!</h1>

      </div>
    </div>
  </div>
</div>
<!-- Page content -->
<div class="container-fluid mt--6">
  <div class="row">
    <div class="col-xl-8 order-xl-1">
      <form role="form" name=applyfm>
        <div class="card">
          <div class="card-header">
            <div class="row align-items-center">
              <div class="col-8">
                <h3 class="mb-0">주최자 정보 등록하기</h3>
              </div>
              <div class="col-4 text-right">
                <input type="button" class="btn btn-primary btn-lg btn-block" id="execute" value='등록하기' />
              </div>
            </div>
          </div>
          <div class="card-body">
            <form>
              <h6 class="heading-small text-muted mb-4">주최자 정보</h6>
              <div class="pl-lg-4">
                <div class="row">
                  <div class="col-lg-6">
                    <div class="form-group">
                      <form action='/jan_apply' method='POST'>
                      <label class="form-control-label" for="input-holder">주최기관</label>
                      <input type="text" id="holder" name="holder" class="form-control" placeholder="Organization">
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="form-group">
                      <form action='/jan_apply' method='POST'>
                      <label class="form-control-label" for="input-manager_name">담당자 이름</label>
                      <input type="text" id="manager_name" name="manager_name" class="form-control" placeholder="Name">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-6">
                    <div class="form-group">
                      <form action='/jan_apply' method='POST'>
                      <label class="form-control-label" for="input-manager-contact">담당자 연락처</label>
                      <input type="integer" id="manager_contact" name="manager_contact" class="form-control" placeholder="010-0000-0000">
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="form-group">
                      <label class="form-control-label" for="input-option">기타사항</label>
                      <input type="text" id="input-option" class="form-control" placeholder="Optional  ex) email@email.com" value="">
                    </div>
                  </div>
                </div>
              </div>
              <hr class="my-4" />
              <!-- Address -->
              <h6 class="heading-small text-muted mb-4">페스티벌 상세정보</h6>
              <div class="pl-lg-4">
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label class="form-control-label" for="input-festival">페스티벌 명</label>
                      <input id="input-festival" class="form-control" placeholder="Festival title" value="" type="text">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-4">
                    <div class="form-group">
                      <label class="form-control-label" for="input-dates">개최 기간</label>
                      <input type="text" id="input-dates" class="form-control" placeholder="OOOO.OO.OO-OOOO.OO.OO" value="">
                    </div>
                  </div>
                  <div class="col-lg-4">
                    <div class="form-group">
                      <label class="form-control-label" for="input-location">개최 장소</label>
                      <input type="text" id="input-location" class="form-control" placeholder="Location" value="">
                    </div>
                  </div>
                  <div class="col-lg-4">
                    <div class="form-group">
                      <label class="form-control-label" for="input-url">페스티벌 공식홈페이지</label>
                      <input type="number" id="input-url" class="form-control" placeholder="url">
                    </div>
                  </div>
                </div>
              </div>
              <hr class="my-4" />
              <!-- Description -->
              <h6 class="heading-small text-muted mb-4">페스티벌 상세 설명</h6>
              <div class="pl-lg-4">
                <div class="form-group">
                  <label class="form-control-label">기타 페스티벌 사항</label>
                  <textarea rows="4" class="form-control" placeholder="Description"></textarea>
                </div>
              </div>
            </form>
          </div>
        </div>
      </form>      
    </div>
  </div>

  {% include "includes/footer.html" %}

</div>

{% endblock content %}
<!— Specific JS goes HERE —>
{% block javascripts %}

<script>
  $('#execute').click(function () {
    let holder = $('#holder').val();
    let manager_name= $('#manager_name').val();
    let manager_contact = $('#manager_contact').val();

    var post_data = {
      'holder': holder,
      'manager_name': manager_name,
      'manager_contact': manager_contact
    }

    theForm = document.applyfm;
    if (theForm.holder.value == ""){
      alert("주최기관을 입력하세요.");
      return theForm.holder.focus();
    }
    
    if (theForm.manager_name.value == ""){
      alert("담당자를 입력하세요.");
      return theForm.manager_name.focus();
    }
    
    if (theForm.manager_contact.value == ""){
      alert("연락처를 입력하세요.");
      return theForm.manager_contact.focus();
    }
    
    $.ajax({
      type: "POST",
      url: "/jan_apply",
      data: JSON.stringify(post_data),
      dataType: 'JSON',
      contentType: "application/json",
      success: function (data) {
        alert("등록되었습니다.");
      },
      error: function (request, status, error) {
        alert(error);
      }
    });
  });
</script>
{% endblock javascripts %}
