{% extends 'layouts/base.html' %}

{% block title %} 주최자 정보 {% endblock title %}

{% block content %}

<div class="header pb-6 d-flex align-items-center" 
     style="min-height: 500px; background-image: url(/static/assets/img/theme/profile-cover.jpg); background-size: cover; background-position: center top;">
  <!-- Mask -->
  <span class="mask bg-gradient-default opacity-8"></span>
  <!-- Header container -->
  <div class="container-fluid d-flex align-items-center">
    <div class="row">
      <div class="col-lg-7 col-md-10">
        <h1 class="display-2 text-white">안녕하세요, 님!</h1>

      </div>
    </div>
  </div>
</div>
<!-- Page content -->
<div class="container-fluid mt--6">
  <div class="row">
    <div class="col-xl-10 order-xl-1">
      <form role="form" name=applyfm>
        <div class="card">
          <div class="card-header">
            <div class="row align-items-center">
              <div class="col-8">
                <h3 class="mb-0">정보 확인하기</h3>
              </div>
              <div class="col-4 text-right">
                <input type="button" class="btn btn-primary btn-lg btn-block" id="execute" value='변경하기' />
              </div>
            </div>
          </div>
          <div class="card-body">
            <form>
              <h6 class="heading-small text-muted mb-4">주최자 정보</h6>
              <div class="pl-lg-4">
                <div class="row">
                  <div class="col-lg-6">
                    <div class="form-group">
                      <form action='/jan_apply' method='POST'>
                      <label class="form-control-label" for="input-holder">주최기관</label>
                      <input type="text" id="holder" name="holder" class="form-control" placeholder="Organization">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-4">
                    <div class="form-group">
                      <form action='/jan_apply' method='POST'>
                      <label class="form-control-label" for="input-contact">담당자 연락처</label>
                      <input type="text" id="contact" name="contact" class="form-control" placeholder="010-0000-0000">
                    </div>
                  </div>
                </div>
              </div>
              <hr class="my-4" />
              <!-- Address -->
              <h6 class="heading-small text-muted mb-4">페스티벌 상세정보</h6>
              <div class="pl-lg-4">
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <form action='/jan_apply' method='POST'>
                      <label class="form-control-label" for="input-festival">페스티벌 명</label>
                      <input id="festival_title" name="festival_title" class="form-control" placeholder="Festival title" type="text">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-4">
                    <div class="form-group">
                      <form action='/jan_apply' method='POST'>
                      <label class="form-control-label" for="input-dates">개최 기간</label>
                      <input type="text" id="dates" name="dates" class="form-control" placeholder="0000-00-00~0000-00-00" >
                    </div>
                  </div>
                  <div class="col-lg-4">
                    <div class="form-group">
                      <form action='/jan_apply' method='POST'>
                      <label class="form-control-label" for="input-location">개최 장소</label>
                      <input type="text" id="location" name="location" class="form-control" placeholder="Location">
                    </div>
                  </div>
                  <div class="col-lg-4">
                    <div class="form-group">
                      <form action='/jan_apply' method='POST'>
                      <label class="form-control-label" for="input-url">페스티벌 공식홈페이지</label>
                      <input type="text" id="url" name="url" class="form-control" placeholder="url">
                    </div>
                  </div>
                </div>
              </div>
              <hr class="my-4" />  
            </form>
          </div>
        </div>
      </form>      
    </div>
  </div>

  {% include "includes/footer.html" %}

</div>

{% endblock content %}
<!— Specific JS goes HERE —>
{% block javascripts %}

<script>
  $('#execute').click(function () {
    let holder = $('#holder').val();
    let contact = $('#contact').val();
    let festival_title = $('#festival_title').val();
    let dates= $('#dates').val();
    let location = $('#location').val();
    let url= $('#url').val();

    var post_data = {
      'holder': holder,
      'contact': contact,
      'festival_title': festival_title,
      'dates': dates,
      'location': location,
      'url': url,
    }


    theForm = document.applyfm;
    if (theForm.holder.value == ""){
      alert("주최기관을 입력하세요.");
      return theForm.holder.focus();
    }
    
    if (theForm.contact.value == ""){
      alert("연락처를 입력하세요.");
      return theForm.contact.focus();
    }

    if (theForm.festival_title.value == ""){
      alert("페스티벌 명을 입력하세요.");
      return theForm.festival_title.focus();
    }

    if (theForm.dates.value == ""){
      alert("페스티벌 기간을 입력하세요.");
      return theForm.dates.focus();
    }
    
  
    $.ajax({
      type: "POST",
      url: "/jan_apply",
      data: JSON.stringify(post_data),
      dataType: 'JSON',
      contentType: "application/json",
      success: function (data) {
        alert("등록되었습니다.");
      },
      error: function (request, status, error) {
        alert(error);
      }
    });
  });
</script>
{% endblock javascripts %}